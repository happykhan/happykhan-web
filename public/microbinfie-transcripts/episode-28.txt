Hello, and thank you for listening to the Microbinfeed podcast. Here, we will be
discussing topics in microbial bioinformatics. We hope that we can give you some
insights, tips, and tricks along the way. There is so much information we all
know from working in the field, but nobody writes it down. There is no manual,
and it's assumed you'll pick it up. We hope to fill in a few of these gaps. My
co-hosts are Dr. Nabil Ali Khan and Dr. Andrew Page. I am Dr. Lee Katz. Both
Andrew and Nabil work in the Quadram Institute in Norwich, UK, where they work
on microbes in food and the impact on human health. I work at Centers for
Disease Control and Prevention and am an adjunct member at the University of
Georgia in the U.S. Hello. Welcome to a new thing we are doing called Software
Deep Dives, where we interview the author of a bioinformatics software package.
Today, we are having a chat about some of the software we have created
ourselves, because behind all the software are quirky details that never make it
into the final paper. Today, Nabil is in the hot seat with Brigg. We all know
that Brigg has like a thousand citations, so what's all that about, Nabil? Brigg
is a software. It's just a graphical user tool where people can put in sequences
and generate a simple, circular comparison plot. And how does it do that? In
terms of the input? What is the input? So, the input are sequences, either
GenBank, FASTA, MultiFASTA, and you have one selected as the reference genome,
and then all of the others are compared back to that reference. The last results
are shown as concentric rings on a picture. You can add other things like
annotations, and you can play around with all of the thresholds and so on, and
customize it as you like. And do you have to do the BLAST yourself, or is it
built in? No, the BLAST is built in. You do have to... It doesn't install BLAST
for you, but it'll use whichever BLAST you point it to. And so it takes that...
What I found was, at the time, that was definitely a limiting factor for people
getting into mathematics was they had to learn how to use BLAST on the command
line before they could start interrogating their data. And this just sort of
keeps this under the hood and does it for you. So is it compatible with the
latest NCBI BLAST Plus? Yes. I think at the time, BLAST Plus had just been
released, so actually it was working with Legacy and BLAST Plus, and it still
probably will work with Legacy BLAST if you put it in there. Awesome. And I
guess at the end, it makes a really nice figure, because, I mean, you have
thousands of citations or however many, millions, I'm guessing. And so I guess
people are using this in their papers. So can you describe kind of what the
figure looks like? So people still use it today, which is a little surprising to
me. I always thought people would move on to looking at very large comparisons
and lots and lots of different genomes, and we would represent it differently.
But it just provides a very simple, I guess, intuitive visualization of what
your different genomes look like to a single reference, and just shows you
what's conserved and what's not conserved for each of those different queries
that you've put into it. So people use it for things like, these days, people
use it a lot for looking at plasmids. In the past, people were using it a lot
more for looking at complete genomes and comparing those. And I know people
actually do use it for some eukaryotes. So I know someone once asked me to
increase the scaling size so it would work for things like yeast. My God, that's
big. So when was it published? Came out in August 2011. So it's still a test of
time. It hasn't expired like most mathematics programs, you know, after three or
five years. It's, yeah, it's a really odd one, because I remember writing about
or telling people that this is a very particular way of representing your data.
And as we generate more genomes, this is not going to be relevant anymore. But
it does seem to generate something people like, and it seems to be something
that's easy to use. And so people just seem to stick with it. Who actually
kicked this off? Who asked for it to be done? This was a wager from my PhD
supervisor, Scott Beetson. And he just posed this very simple question. At the
time, he was working a lot with Blast Atlas, which produced very complex
figures, but you had to generate these configuration files that specified all
the inputs and so on. And he had a Perl script that was plugging this huge sheet
that would then feed into Blast Atlas and generate the figure. And he was like,
isn't there just a simple tool that can just take Blast results and just draw
the picture for me? Do I really have to make all these files? And he had it as
an open tender to the group to make writer software. And the reward was one jug
of beer to be the first one to write it. Yeah, it was supposed to be like a
little helper tool that you'd write in like a week or two. And did you write in
a week or two or did it take a bit longer? The basic, well, the basic brief of
what he wanted took me like a week or two. But then once we started seeing it,
it became this thing of like, oh yeah, it works on a FASTA file. Can it work
with GenBank as input? Can it show the annotations from the GenBank file as
well? Can it show coverage from a BAM file? Can it do this? Can it do that? And
then it just kept going and going and going. And I think I wound up spending
several months, maybe six, nine months just tweaking it and working on it to get
it to the state that it's in. And you mentioned a jug of beer. What is the
volume of that jug of beer? Oh, it's a standard measurement of beer in
Australia. It is two pints. That's not very much. Two Imperial pints, 1.2
liters. I would expect at least four pints in a jug. I think Brig has rewarded
me many times over after, given how well it's done. But yeah, but it was nice
beer. It was Cooper's... No, was it? I think it was Cooper's Golden Ale, which
is a local microbrewery beer back home. So it was good stuff, quality of a
quantity. So was there any earlier prototypes before you came on to make what
Brig is now today? Well, the actual image rendering package underneath is called
CGView, which had been out for several years before that. And I had been
tinkering around with it for a lot of different things. I was using it on
different projects. I think that was the first thing I wrote in Perl, was a
script that would sort of generate a simple, use CGView to generate a simple
picture. And then it went on from there. This particular representation is not
new, making this comparative figure like this. There were a lot of tools at the
time that would make the same thing. So Blast Atlas, as we've mentioned, there
was DNA Plotter from the Sanger. That didn't do the blast for you, but you could
just feed in the results and sort of annotate the results on a ring. And then
there were things like GeneWiz Browser. And then CGView also had a CGView
server, which is doing something similar. Who are the major people involved in
the whole process? Yeah, so there's a saying, it takes a village to raise a
child. This is the first thing I did in my PhD, was try and write this software.
I had a lot of help from a lot of different people. I remember the development
cycle was I would write a version. I would email it out to everyone who was
using it. And then I would get feedback about things and bug fixes and ideas for
it. And this was everyone in our department and University of Queensland, I was
sending out. So that's everyone in Scott's group, everyone in Mark Shemby's
group, people in other research groups, people at conferences would give me
feedback. And then so all of those different people, especially my co-
supervisors, Nuri and Nico, helped out a lot with just getting that thing when
you make the figure and you look at it and you say that it's pretty, it has some
sort of aesthetic that was from a lot of different people giving a lot of
feedback. And I think that's the major thing that attracts people to the Brigg
figure versus doing it with other tools. It's also publication ready, which is
quite handy. Yeah, exactly. We had a lot of effort to make sure that it would
generate the SVG and the PNGs in a way that you could just slot it straight to
an editor into a paper. That was like a key requirement. So Brigg, where did the
name come from? It sounds like some kind of pirate reference. Yeah, partially. I
think whenever we come to deciding a name for a particular software, you want
something that's memorable. You want something that's a bit, that is unique,
that doesn't get confused with other things. And the acronym is what it does,
Blast Ring Image Generator. That's what it does. And ships are cool. I like
ships. And I think in some sense, I felt partially imprisoned while doing all of
the debugging. So the name Brigg, being locked in the Brigg working on this
thing, that had a little bit in there as well.  I always assumed it stood for
something, but it's just all capitals brig like you're yelling it So is it a
backronym or did you actually have a proper? You know think about it first. We
had a long discussion on the name taking. Yeah Looking at the things that was
doing so blastering image generator that's what it stands for and we were
playing around with that for quite some time for to come up with the name and
It's stuck. It just stuck. It's Very Bizarre to read the literature and see
people right figure to this brig analysis shows XYZ and you're like I okay Yeah,
I could sense blast. I mean you're giving me too much credit So if you had a
totally naive person who was just looking around naive to blast atlases What
would you tell that person is this selling point for brig the unique selling
point for it? It's it's it's very subtle because the space is quite saturated
with different tools and they're all very good in their own different ways for
brig the unique thing was People say it's very easy to use People say that the
manual is written really well and explains how to use it properly It has a lot
of different features that allows them to generate the kind of figures they Want
and they're ready for publication. So it's mindful of what people are trying to
achieve and Each of the features were selected that way that they were
addressing a unique need for a particular person So what language was it written
in so it was written in Java. So Java So because I did software engineering in
my undergraduate That was the language that I was most comfortable with at the
time. I hadn't done very much Perl or Python the graphic user interface. I knew
Fairly well how to do in Java. So that's which one was I just playing or was it
a to be a swing? No, no swing for that It's a lot. I think Java's Definitely not
nice. I wrote it in the Java 1.4 era Which is like where everything in our
interfaces and everything is hard as strongly typed and you're like, oh my god
Do I have to write three? Classes just to get something done. I think it's a lot
better now. Did you follow all the software engineering? Everything you have
That's that's that's my major regret was Because it was my first You do so you
do software projects in university but this is the first one that I was making
that had real people using it and I Didn't sadly I didn't include things like
unit tests It is object orientated inside and it does have those sort of design
principles But there's not a strong testbed sitting behind it, which now Makes
it next to impossible to go back and make major changes to it without breaking
everything and I thoroughly regret I didn't take the time to kind of learn how
to do that properly So how does it interface with blast? Does it just run it
like a command-line script or does it actually yeah Just run it. So it runs it
as a separate Java thread Subprocess I did take the care to make sure that when
you kill the main Brick GUI thing that it does go off and kill the blast sub
process. That was a that took me a while to figure out Otherwise every time I
said like 10 different blocks running in the background and people's left would
start Really slow and they didn't know why he'd be popular. So it is thread safe
at that Get some email like hey, it's made my computer run really slow. What the
hell is it done? Is it a virus? Yeah, being thread safe is important. That was a
learning experience. But yeah, it is just running a Java thread underneath So
how is it all packaged up because I recall it was very very easy to actually go
and install It's just the job. It's just a Java archive Though so that's Java's
own packaging thing. So it's just a one-click Application to run it. That's all
the way Java set up to help I think these days I would go back and have proper
library management like to things like Maven and things like that Which would
make the updating and installing a bit easier. So how is it documented? so the
document was a 50 page manual I wrote in latech That's a variable Yeah, that's
available as alongside when you download it. There's this manual document in
there. It's it's a book I'll explain how the manuals laid out because I took we
took a lot of care to make sure that it was written in a way that someone who
didn't know what they were doing could just Figure out what they wanted to
achieve and get the job done. There's like The first section is like a worked
example. So the first couple of pages to show you here's a figure like here's an
awesome final product Go to this chapter if you want to know how to do this and
there's like three or four different examples and it just Takes you through it
with with example data exactly click this and click this and click this you
change this you change this to make This kind of figure and then the back end of
it is a reference section which just explains all of the different options for
configuring CG view underneath that how to configure the blast how to Change
parameters all but the different buttons you and so on I mean, I bring that up
because people come to me and say that that manual was really good it explained
exactly how to do it, but that took a lot of effort to generate that and I could
see it being much more useful being on like read the docs these days That's how
I would do it today put it on read the docs and have something similar So what
features are you most proud of internally? I think I the one thing that I had to
do was a lot of optimization and One thing that I'm quite proud of is the fact
that when you have multiple different Sequences or you have multiple different
Blast results where the blast results would overlap based on the coordinates. I
wrote a lot of logic that would go back and clean that up and Simplify the final
figure because if you if you just did a simple thing of for each blast hit you
Converted it and then drew an object on the SVG You wouldn't be able to render
it would suddenly be this huge figure that would just take Meg's and Meg's and
Meg's So that optimization in the background was something I spent a lot of time
trying to make sure that this would produce figures that were quite clean and
minimal so people could make really big pictures without it crashing and And it
paid off because people can put I've seen figures I've never made figures this
big people make figures with like 50 different genomes with all of the
sanitation and all this different color and The file renders and it's it works
Do you have any quirks that you want to talk about any behind the scenes things
that happened in the development? Yeah, one of the fun things is The color
palette if you use brig, there's like a specific color palette and that took
That was based off one fellow PhD student who would make a lot of big figures
for her different talks and stuff And she had a very particular color palette
that I liked and I just used that as the default Color scheme, so, you know, it
goes like purple green blue red something something something There's like a set
of 20 colors that are that are built into it that it always uses by default You
can change it But there's a default set and then you and then I see that In
publications where people have just made this figure and I always see that same
sequence of colors. Okay Has she seen that like like she came over this palette
and now she gets to see in the literature I hope I hope that she does see that
and remember that that she helped me with that She's aware that I used a color
palette because I kept seeing these figures I'm like, look, I really like the
way you pick the colors. I'm gonna use it I really hope she does remember it
because that's like a thing. That's such a random thing. That's just but it's
there And people don't realize that they're doing it. It's like a meme. It's a
trope. It's an inside joke only I laugh about well I guess everyone can laugh
about it now when they see it I guess people can deliberately change the color
palette just to just to be contrarian So what features would you love to add but
you didn't really have time for? Oh, I think I had I had a bunch of different
Feedback, I remember one from cat hold saying that it should support bed files
and wiggle files It's like yeah, that would have been easy to add but I never
did it there were different philosophical problems with the does with the Figure
that come out of it once you start playing with it and you realize that there's
these very stark limitations The first thing is is that it's the figure it
generates a static you sort of want because there's so much information you want
to be able to zoom in and Pick on different regions and zoom out and so on which
you can't do The other element is you you are always bounded by the reference
There's a central reference and everything is compared to that that makes the
figure simple to understand But that but then all of a sudden anything that's
accessory that's coming in and out between your query sequences You have no idea
if there's something not in the reference. You never see it on the figure. You
never know about it and That was something There was a publication of different
software that came out after it after Brig that tried to solve that problem by
showing this kind of Like the sort of Artemis comparison figure but circular
with with insertions and deletions, but it didn't really make sense It didn't it
didn't have the same like you didn't you had to  take some time to understand
what it was showing you and that's the kind of problems I saw with the software
and that still bother me I don't know about both of you when you write a tool
and people like it and secretly all you think about it just the things where
you're like oh yeah but it doesn't do this and it doesn't do that absolutely
yeah but you got a ship early and ship often you know and also you have to call
it a day sometimes and just move on agree with that and yeah I have the same I
had the same problem with my software wish I did this or that so Nabil are there
any plans for putting break on the command line yeah I've always wanted to go
back and do it that was one of the first things people started asking about and
people still ask about and I think someone's actually written something that
will generate the XML input for the CG view and but do it command line as well
yes I think if I was going back to do break again I would probably just re-
implement it I think Java is not the best language these days I'd probably just
I would change so many different things and I would add it would be online and
it would sing and it would dance take any input and GFF files and all sorts of
different things it would do I like the idea of putting in like the Konami code
or something and then it would sing and dance for you oh yes some easter eggs
would be fantastic add some different color palettes well thanks for another
great discussion this was a quick chat about some of the software we've created
ourselves there's always some interesting facts about how these different tools
came into being today we're talking about brig which is for visualizing genomes
against a reference you can check it out on SourceForge and that's all the time
we have for this episode see you next time thank you all so much for listening
to us at home if you like this podcast please subscribe and like us on iTunes
Spotify SoundCloud or the platform of your choice and if you don't like this
podcast please don't do anything this podcast was recorded by the microbial
bioinformatics group and edited by Nick Waters the opinions expressed here are
our own and do not necessarily reflect the views of CDC or the Quadrant
Institute